//
// pasteque-baseline
//
// 0.0.6
//
// Beautify typography:
// Aligning to baseline.
//
// Zaza Agency <hi@zaza.africa> (zaza.africa)
//
// This work is licensed under the Creative Commons
// Attribution 4.0 International License. To view a copy
// of this license, visit http://creativecommons.org/licenses/by/4.0/.
//

@mixin before-test-baseline {
  $p-baseline-teque: map-merge($p-baseline-teque, ("test": ("family": sans-serif, "cap-height": 0.72))) !global;
}

@include before-test-baseline;

@include test-module("p-baseline-shift [function]") {
  @include test("Should return distance to shift text down.") {
    $to: 100px;
    $cap-height: map-get(map-get($p-baseline-teque, "test"), "cap-height") * 1em;
    $output: p-baseline-shift($to, $cap-height);
    $expect: 1.25rem;

    @include assert-equal($output, $expect);
  }
}

@include test-module("p-baseline-leader [mixin]") {
  @include test("Should output correct padding-top to move the text downwards.") {
    @include assert {
      @include output {
        $to: 100px;
        $font: "test";

        @include p-baseline-leader($to, $font);
      }

      @include expect {
        padding-top: 1.25rem;
      }
    }
  }
}

@include test-module("p-baseline-trailer [mixin]") {
  @include test("Should output correct margin-bottom to fix vertical rhythm for elements below.") {
    @include assert {
      @include output {
        $to: 100px;
        $font: "test";

        @include p-baseline-trailer($to, $font);
      }

      @include expect {
        margin-bottom: 1.75rem;
      }
    }
  }
}

@include test-module("p-type-to-baseline [mixin]") {
  @include test("Should output padding-top to move the text downwards and margin-bottom to fix vertical rhythm for elements below.") {
    @include assert {
      @include output {
        $to: 16px;
        $font: "test";
        $leader: 1;
        $trailer: 3;

        @include p-type-to-baseline($to, $font, $leader, $trailer);
      }

      @include expect {
        font-size: 1rem;
        line-height: 2rem;
        padding-top: 1.64rem;
        margin-bottom: 3.36rem;
      }
    }
  }
}

@include test-module("p-component-to-baseline [mixin]") {
  @include test("Should output padding-top to move the text downwards and padding-bottom to fix vertical rhythm for elements below.") {
    @include assert {
      @include output {
        $to: 16px;
        $font: "test";
        $lines: 2;

        @include p-component-to-baseline($to, $font, $lines);
      }

      @include expect {
        font-size: 1rem;
        line-height: 2rem;
        padding-top: 2.64rem;
        padding-bottom: 2.36rem;
      }
    }
  }
}
